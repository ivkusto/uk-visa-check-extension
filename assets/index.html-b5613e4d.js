import{a as f,b as d,t as p,e as _,i as m,c as u,r as y}from"./web-eeb21161.js";import{c,g as l}from"./config-63eb9ce4.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const v="_wrapper_5azhf_3",b={wrapper:v},w="_header_qis5i_3",g={header:w},$=p('<header><h1>Visa Sponsorship Data Upload Required</h1><p>To fully utilize this extension, please upload the necessary Visa sponsorship data. You can obtain the required data from the following link: <a href="https://uktiersponsors.blob.core.windows.net/excel/UkTiersponsors_All.csv" target="_blank">uktiersponsors'),S=({})=>(()=>{const n=$(),o=n.firstChild,s=o.nextSibling,t=s.firstChild,e=t.nextSibling;return f(r=>{const i=g.header,a=g.link;return i!==r._v$&&d(n,r._v$=i),a!==r._v$2&&d(e,r._v$2=a),r},{_v$:void 0,_v$2:void 0}),n})(),x="_input_14tms_3",L={input:x};async function T(n){return new Promise((o,s)=>{const t=indexedDB.open(c.dbName,1);t.onupgradeneeded=e=>{l(e).result.createObjectStore(c.store,{keyPath:"id",autoIncrement:!0}).createIndex(c.index,c.index,{multiEntry:!0})},t.onsuccess=e=>{const i=l(e).result.transaction(c.store,"readwrite"),a=i.objectStore(c.store);n.forEach(h=>{a.add(h)}),i.oncomplete=()=>o(!0),i.onerror=()=>s(i.error)},t.onerror=e=>{s(l(e).error)}})}function O(n){if(!n)return null;var o=n.split(" "),s=o.reduce((t,e)=>(!/^\d+$/.test(e)&&e&&(t[e]=!0),t),{});return Object.keys(s)}const P=p('<input type="file" accept=".csv">'),C=({})=>{const[n,o]=_(!1),s=async t=>{o(!0),E(t).then(()=>o(!1))};return(()=>{const t=P();return t.addEventListener("change",s),f(e=>{const r=L.input,i=n();return r!==e._v$&&d(t,e._v$=r),i!==e._v$2&&(t.disabled=e._v$2=i),e},{_v$:void 0,_v$2:void 0}),t})()};async function E(n){const o=n.target.files?.[0];if(!o)return Promise.reject("file not found");try{const s=await N(o);if(!s)return;const e=s.split(`
`).slice(1).map(A);await T(e)}catch(s){console.error("Error loading CSV:",s)}}function N(n){return new Promise((o,s)=>{const t=new FileReader;t.onload=e=>o(e.target?.result),t.onerror=e=>s(e),t.readAsText(n)})}function A(n){const[o,s,t,e,r,i]=n.split(","),a=o?.replace(/[^\w]/g," ").trim().toLowerCase();return{orgName:a,town:s?.trim(),industry:t?.trim(),mainTier:e?.trim(),subTier:r?.trim(),dateAdded:new Date(i?.trim()),words:O(a)}}const D=p("<div>"),j=()=>(()=>{const n=D();return m(n,u(S,{}),null),m(n,u(C,{}),null),f(()=>d(n,b.wrapper)),n})(),I=document.getElementById("root");y(()=>u(j,{}),I);
